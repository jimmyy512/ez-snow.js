!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ezSnow=t()}(this,function(){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(){function o(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"body",i=1<arguments.length?arguments[1]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=new Image;n.src=i,0==n.width&&(n.onload=function(){e._bgWidth=n.width,e._bgHeight=n.height,e.init()}),this._imgs=new Array,this._srcPath=i,this._isInit=!1,this._appendDom=document.querySelector(t),this._appendDom.style.position="relative",this._RAF=null,this._RAF_then=null,this._const_FPS=60,this._bgWidth=n.width,this._bgHeight=n.height,this._imgSum=10,this._isFullMode=!0,this._ScaleMax=0,this._ScaleMin=0,this._phyVx=.1,this._phyVy=[.1,.35],this._isRandDireciotn=!0,this._directionWay=!0,this._startFadeOutDistance=50,this._fadeFactor=.05,this._startFade=1,this.customEvent=null}var e,t,i;return e=o,(t=[{key:"init",value:function(){if(0==this._bgWidth)return this;if(!this._isInit){for(var e=0;e<this._imgSum;e++){var t=1,t=0===this._ScaleMax&&0===this._ScaleMin?1:0!==this._ScaleMax&&0===this._ScaleMin?this._ScaleMax:Math.random()*this._ScaleMax+this._ScaleMin,i=document.createElement("img");i.style.position="absolute",i.style.backgroundSize="contain",i.style.pointerEvents="none",i.src=this._srcPath,i.innerText="",i.style.width="".concat(this._bgWidth*t,"px"),i.style.height="".concat(this._bgHeight*t,"px"),i.style.opacity=0,i.ezSnow={opacity:0,sizeScale:t,pos:{x:Math.random()*this._appendDom.clientWidth+1,y:this.isFullMode?Math.random()*this._appendDom.clientHeight+1:0}},this._appendDom.appendChild(i),this._imgs.push(i)}return this._ezSnowDataSync(),this.callRequestAnimationFrame(),this._isInit=!0,this}this._warnTip("init","if you want reinit plz call destroy() before init()!!")}},{key:"callRequestAnimationFrame",value:function(){var a=this;this._RAF=requestAnimationFrame(function(){a.callRequestAnimationFrame();var e=1e3/a._const_FPS,t=Date.now(),i=t-a._RAF_then;e<i&&(a._imgs.forEach(function(e,t){var i=e.ezSnow.phy,n=e.ezSnow.pos;0<a._phyVy&&a._appendDom.clientHeight-a._bgHeight-n.y<a._startFadeOutDistance||a._phyVy<0&&n.y<a._startFadeOutDistance?(e.ezSnow.opacity-=a._fadeFactor,e.ezSnow.opacity<0&&(e.ezSnow.opacity=0),e.style.opacity=e.ezSnow.opacity):e.ezSnow.opacity<a._startFade&&(e.ezSnow.opacity+=a._fadeFactor,e.style.opacity=e.ezSnow.opacity),a._isRandDireciotn&&(e.ezSnow._reverseCount>=e.ezSnow._reverseJudge&&Math.floor(2*Math.random())?(e.ezSnow._reverseCount=0,e.ezSnow._reverseDirection=!e.ezSnow._reverseDirection):e.ezSnow._reverseCount++);var o=i.vX;e.ezSnow._reverseDirection&&(o=0-i.vX),e.style.left=n.x+o+"px",e.style.top=n.y+i.vY+"px",n.x+=o,n.y+=i.vY,n.y>a._appendDom.clientHeight-a._bgHeight*e.ezSnow.sizeScale?(e.style.top=0,n.y=0,e.ezSnow.opacity=0,e.style.opacity=0):n.y<0&&(e.style.top=a._appendDom.clientHeight-a._bgHeight*e.ezSnow.sizeScale,n.y=a._appendDom.clientHeight-a._bgHeight*e.ezSnow.sizeScale,e.ezSnow.opacity=0,e.style.opacity=0),(n.x>a._appendDom.clientWidth-a._bgWidth*e.ezSnow.sizeScale||n.x<0)&&a.resetPos(e),null!==a.customEvent&&a.customEvent(e,t)}),a._RAF_then=t-i%e)})}},{key:"setAutoDirection",value:function(e,t){if("boolean"==typeof e)return e||(this._directionWay=t),this._isRandDireciotn=e,this;this._warnTip("setDirection","param need boolean,directionWay:true,snow will float right.")}},{key:"setScale",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if("number"==typeof t&&"number"==typeof e)return this._ScaleMax=t,this._ScaleMin=e,this;this._warnTip("setScale","ScaleMax、ScaleMin need number.")}},{key:"setPhysics",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._phyVx,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._phyVy;return this._phyVx=e,this._phyVy=t,this._ezSnowDataSync(),this}},{key:"setFullMode",value:function(e){if("boolean"==typeof e)return this.isFullMode=e,this;this._warnTip("setFullMode","param need boolean.")}},{key:"setNum",value:function(e){if("number"==typeof e)return this._imgSum=e,this;this._warnTip("setNum","param need number ")}},{key:"setOpacity",value:function(e){if("number"==typeof e)return this._startFade=e,this;this._warnTip("setOpacity","param need number ")}},{key:"setLeaveFadeFactor",value:function(e){if("number"==typeof e)return this._fadeFactor=e,this;this._warnTip("setLeaveFadeFactor","param need number.")}},{key:"setFadeOutDistance",value:function(e){if("number"==typeof e)return this._startFadeOutDistance=e,this;this._warnTip("setFadeOutDistance","param need number.")}},{key:"setCustomEvent",value:function(e){if("function"==typeof e)return this.customEvent=e,this;this._warnTip("setCustomEvent","param need function.")}},{key:"destroy",value:function(){cancelAnimationFrame(this._RAF),this._clearAllSnow(),this._isInit=!1}},{key:"reInit",value:function(){this.destroy(),this.init()}},{key:"resetPos",value:function(e){var t=Math.random()*this._appendDom.clientWidth-this._bgWidth*e.ezSnow.sizeScale;e.ezSnow.pos.x=t,e.ezSnow.pos.y=0,e.style.left=t,e.style.top=0,e.ezSnow._reverseCount=0,e.ezSnow.opacity=0,e.style.opacity=0}},{key:"_clearAllSnow",value:function(){var i=this;this._imgs.forEach(function(e,t){i._appendDom.removeChild(e)}),this._imgs.length=0}},{key:"_warnTip",value:function(e,t){console.error("ezSnow.js error! ".concat(e," fail,").concat(t))}},{key:"_ezSnowDataSync",value:function(){var i=this;this._imgs.forEach(function(e,t){e.ezSnow.phy={vX:Array.isArray(i._phyVx)?Math.random()*i._phyVx[1]+i._phyVx[0]:i._phyVx,vY:Array.isArray(i._phyVy)?Math.random()*i._phyVy[1]+i._phyVy[0]:i._phyVy},e.ezSnow._reverseJudge=Math.floor(2e3*Math.random())+200,e.ezSnow._reverseDirection=i._isRandDireciotn?Math.floor(2*Math.random()):i._directionWay,e.ezSnow._reverseCount=0})}}])&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}()});
//# sourceMappingURL=ezSnow.umd.js.map
